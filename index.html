<html>

<head>
     <title>圭紫の初心者向け日本語辞典</title>
     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">

     <meta name="theme-color" content="#FEF2E8">
     <meta content="圭紫の初心者向け日本語辞典" property="og:title">
     <meta content="Keishi's Japanese Dictionary for Beginners" property="og:description">
     <meta content="Keishi's Japanese Dictionary for Beginners" name="description">
     <meta name="revisit-after" content="2 days">
     <meta property="og:locale" content="en">
     <link rel="canonical" href="https://keishispl.github.io/">
     <meta property="og:url" content="https://keishispl.github.io/">
     <meta property="og:site_name" content="圭紫">

     <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">
     <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" type="text/css"
          rel="stylesheet">
     <link href="index.css" type="text/css" rel="stylesheet">
</head>

<body>
     <div class="tint" style="text-align: left; margin-left: 50px;">
          <div style="padding-bottom: 50px;">
               <h1 style="padding-top: 25px; padding-bottom: 25px;" class="unselectable">圭紫の初心者向け日本語辞典<br>Keishi's
                    Japanese Dictionary for
                    Beginners</h1>
               <div id="div_group"></div>
          </div>
          <button id="refresh"><i class="fa-solid fa-arrow-up"></i></button>
          <a id="refreshtext" class="pointer" style="z-index: 0;">Back to Top</a>

          <script src="json_from_file.js"></script>
          <script src="parse_data.js"></script>
          <script>
               const refresh = document.getElementById(`refresh`);
               refresh.style.display = "none";
               
               var categories = [];

               refresh.addEventListener('click', () => {
                    document.body.scrollTo({ top: 0, behavior: 'smooth' });
                    document.documentElement.scrollTo({ top: 0, behavior: 'smooth' });
               });

               window.onscroll = function () { scrollFunction() };
               function scrollFunction() {
                    if (document.body.scrollTop > 250 || document.documentElement.scrollTop > 250) {
                         refresh.style.display = "block";
                    } else {
                         refresh.style.display = "none";
                    }
               }

               function parseCategory(category) {
                    Object.keys(category).forEach((key) => {
                         // Format data in JSON to parse data function
                         if (category[key] == category.text) {
                              category[key].forEach((text) => parseData(text, category.name))
                              return;
                         }

                         // Creating group DIV and title
                         if (category[key] == category.name) {
                              categories.push(category.name);

                              const divGroup = document.getElementById("div_group");

                              const div = document.createElement("div");
                              const div2 = document.createElement("div");

                              div.setAttribute("id", `category_${category.name}`);

                              div2.setAttribute("id", `category_${category.name}_2`);
                              div2.setAttribute("style", "display: none;")
                              div2.setAttribute("class", "row");

                              divGroup.appendChild(div);
                              divGroup.appendChild(div2);


                              const para = document.createElement("p");
                              const para2 = document.createElement("p");
                              div.appendChild(para);
                              div2.appendChild(para2);

                              para.innerHTML = `<b>${category.name} - ${category.eng}</b>`;
                              para.setAttribute("id", `category-${category.name}-text`);
                              para.setAttribute("style", "font-size: 50px;")
                              para.setAttribute("class", "unselectable title pointer")

                              // Show and hide category
                              const toggleBtn = document.getElementById(`category-${category.name}-text`);
                              const hiddenDiv = document.getElementById(`category_${category.name}_2`);

                              toggleBtn.addEventListener('click', () => {
                                   // Show
                                   if (hiddenDiv.style.display === 'none') {
                                        for (const key of categories) {
                                             document.getElementById(`category-${key}-text`).classList.remove('is-enabled');
                                             document.getElementById(`category_${key}_2`).style.display = 'none';
                                        }
                                        toggleBtn.classList.add('is-enabled');
                                        hiddenDiv.style.display = 'block';
                                        // Hide
                                   } else {
                                        toggleBtn.classList.remove('is-enabled');
                                        hiddenDiv.style.display = 'none';
                                   }
                              });
                         }
                    })
               }

               // Get parsed JSON data and then parse it through category function
               jsonFromFile().forEach((category) => parseCategory(category));
          </script>
     </div>
</body>

</html>